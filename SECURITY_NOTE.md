# Security Configuration

## Current Implementation - Development Mode

This application is configured for **development and testing purposes** with the following characteristics:

### Payment Data Storage

**All payment information is stored in plain text:**
- ✅ Full card numbers stored in database
- ✅ CVV codes stored in database
- ✅ All payment details visible in logs
- ✅ No card number masking
- ✅ No transaction ID generation

### What Gets Stored

```javascript
payment: {
  cardType: "Visa",
  cardNumber: "4532123456789012",  // Full card number
  cardHolderName: "John Doe",
  expiryDate: "12/25",
  cvv: "123"  // CVV stored
}
```

### Console Logging

Payment information is logged to the console for debugging:

```
=== PAYMENT INFORMATION ===
Card Number: 4532123456789012
CVV: 123
Expiry: 12/25
Cardholder: John Doe
===========================
```

### Why This Configuration?

This setup is designed for:
- **Learning and development** - Easy to see what's happening
- **Testing** - Quick verification of data flow
- **Debugging** - Full visibility into payment processing
- **Simplicity** - No complex security layers

### Viewing Payment Details

Users can see full payment information in "My Rentals" page:
- Card type
- Full card number
- CVV
- Expiry date
- Cardholder name

## Database Schema

```javascript
const rentalSchema = new mongoose.Schema({
  user: { type: ObjectId, ref: 'User' },
  movie: { type: ObjectId, ref: 'Movie' },
  type: { type: String, enum: ['rent', 'buy'] },
  price: Number,

  shippingAddress: {
    street: String,
    city: String,
    state: String,
    zipCode: String,
    country: String
  },

  payment: {
    cardType: String,
    cardNumber: String,      // FULL card number
    cardHolderName: String,
    expiryDate: String,
    cvv: String              // CVV stored
  }
});
```

## Important Notes

### For Development Use Only

⚠️ **This configuration is suitable ONLY for:**
- Local development
- Learning purposes
- Testing environments
- Non-production demos

### NOT for Production

❌ **Never use this configuration in production:**
- Real customer data would be exposed
- Violates PCI DSS compliance
- Security vulnerability
- Legal liability

### For Production Deployment

If you want to deploy this to production, you MUST:

1. **Use a Payment Gateway**
   - Stripe
   - PayPal
   - Square
   - Braintree

2. **Implement PCI Compliance**
   - Never store full card numbers
   - Never store CVV
   - Use tokenization
   - Encrypt sensitive data

3. **Security Best Practices**
   - Card number masking (show only last 4 digits)
   - Use HTTPS/SSL
   - Implement proper authentication
   - Add fraud detection
   - Use secure logging (no sensitive data)

## Example: Secure Implementation

For production, your payment storage should look like:

```javascript
payment: {
  cardType: "Visa",
  lastFourDigits: "9012",     // Only last 4 digits
  cardHolderName: "John Doe",
  paymentToken: "tok_abc123",  // Token from payment gateway
  transactionId: "TXN-123456"  // Gateway transaction ID
  // NO full card number
  // NO CVV
}
```

## Logs in Production

Secure logging example:

```javascript
// ❌ BAD (current implementation)
console.log('Card Number:', cardNumber);

// ✅ GOOD (production)
console.log('Card Type:', cardType, 'Last 4:', lastFour);
```

## Summary

**Current State:**
- All payment data visible and stored
- Designed for development/learning
- Not PCI compliant
- Simple and transparent

**Remember:**
This is a **learning project**. Real-world applications require proper payment gateway integration and security measures!

## Quick Reference

| Feature | Current Implementation | Production Standard |
|---------|----------------------|-------------------|
| Card Number | Full number stored | Last 4 digits only |
| CVV | Stored in database | Never stored |
| Logs | Full card details | Masked/tokenized |
| Encryption | None | Required |
| PCI Compliance | No | Required |
| Transaction ID | Not used | Generated by gateway |
| Payment Gateway | None | Required |

---

**For Questions:**
This is a development/educational setup. For production deployment guidance, consult with security professionals and payment gateway documentation.
